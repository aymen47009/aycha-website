<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ“˜ Ø¯Ø±Ø§Ø³ØªÙŠ - Ø¹Ø§Ø¦Ø´Ø©</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #fff5fb;
      color: #4a004a;
      padding: 20px;
      margin: 0;
    }
    h1 {
      text-align: center;
      font-size: 2.4rem;
      color: #d63384;
      margin-bottom: 40px;
    }
    h2 {
      color: #880088;
      font-size: 1.6rem;
      margin-bottom: 15px;
    }
    .section {
      background-color: #ffe6f8;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 40px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    input, textarea {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      width: 100%;
      margin-top: 10px;
      box-sizing: border-box;
      font-family: 'Cairo', sans-serif;
    }
    button {
      background-color: #f2c8ff;
      color: #4a004a;
      border: none;
      padding: 10px 25px;
      border-radius: 15px;
      cursor: pointer;
      margin-top: 15px;
      font-size: 1rem;
    }
    button:hover {
      background-color: #e7aaff;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #e5bae7;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #fdd0fa;
    }
    .status {
      font-weight: bold;
      margin-top: 10px;
    }
    .delete-btn {
      background-color: #ffb3c1;
      border: none;
      border-radius: 10px;
      padding: 5px 10px;
      cursor: pointer;
    }
    .delete-btn:hover {
      background-color: #ff809d;
    }
  </style>
</head>
<body>

<h1>ğŸ“š Ø¯Ø±Ø§Ø³ØªÙŠ - Ø¹Ø§Ø¦Ø´Ø©</h1>

<!-- ğŸ“ Ù‚Ø³Ù… Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© -->
<div class="section">
  <h2>ÙˆØ§Ø¬Ø¨Ø§ØªÙŠ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ©</h2>
  <input id="subj" placeholder="Ø§Ù„Ù…Ø§Ø¯Ø©" />
  <input id="page" placeholder="Ø§Ù„ØµÙØ­Ø©" />
  <input id="exo" placeholder="Ø±Ù‚Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†" />
  <input id="hwDate" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²" />
  <input id="place" placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²" />
  <button onclick="saveHomework()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙˆØ§Ø¬Ø¨</button>
  <p id="hwStatus" class="status"></p>
  <div id="homeworkList"></div>
</div>

<!-- ğŸ“– Ù‚Ø³Ù… Ø­ÙØ¸ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… -->
<div class="section">
  <h2>Ø­ÙØ¸ÙŠ Ù„Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h2>
  <input id="qDate" placeholder="Ø§Ù„ÙŠÙˆÙ…" />
  <input id="surah" placeholder="Ø§Ù„Ø³ÙˆØ±Ø©" />
  <input id="from" placeholder="Ù…Ù† Ø¢ÙŠØ©" />
  <input id="to" placeholder="Ø¥Ù„Ù‰ Ø¢ÙŠØ©" />
  <input id="note" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©" />
  <button onclick="saveQuran()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø­ÙØ¸</button>
  <p id="qStatus" class="status"></p>
  <div id="quranList"></div>
</div>

<!-- ğŸŒŸ JavaScript -->
<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
import {
  getFirestore, collection, addDoc, getDocs, query, orderBy,
  doc, deleteDoc
} from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js';

const app = initializeApp({
  apiKey: "AIzaSyDK3CqwJEB6uG8npPCG6jQqzqkUbI6vjJs",
  authDomain: "aycha-website.firebaseapp.com",
  projectId: "aycha-website",
  storageBucket: "aycha-website.appspot.com",
  messagingSenderId: "488063935676",
  appId: "1:488063935676:web:8a6450edd804d711db5cb9"
});
const db = getFirestore(app);

window.saveHomework = async function () {
  const subj = subjInput.value.trim();
  const page = pageInput.value.trim();
  const exo = exoInput.value.trim();
  const date = hwDate.value;
  const place = placeInput.value.trim();
  const status = document.getElementById("hwStatus");

  if (!subj || !page || !exo || !date || !place) {
    status.textContent = "âŒ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„.";
    status.style.color = "red"; return;
  }

  await addDoc(collection(db, "profile", "aycha", "homework"), {
    subject: subj, page, exercise: exo, date, place
  });

  status.textContent = "âœ” ØªÙ… Ø§Ù„Ø­ÙØ¸!";
  status.style.color = "green";
  subjInput.value = pageInput.value = exoInput.value = hwDate.value = placeInput.value = "";
  showHomework();
}

async function showHomework() {
  const div = document.getElementById("homeworkList");
  const q = query(collection(db, "profile", "aycha", "homework"), orderBy("date", "desc"));
  const snap = await getDocs(q);
  if (snap.empty) return div.innerHTML = "ğŸ“­ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨Ø§Øª.";

  let html = "<table><tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø§Ù„ØµÙØ­Ø©</th><th>Ø§Ù„ØªÙ…Ø±ÙŠÙ†</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ù…ÙƒØ§Ù†</th><th>âŒ</th></tr>";
  snap.forEach(doc => {
    const d = doc.data();
    html += `<tr>
      <td>${d.subject}</td><td>${d.page}</td><td>${d.exercise}</td>
      <td>${d.date}</td><td>${d.place}</td>
      <td><button class="delete-btn" onclick="deleteHomework('${doc.id}')">Ø­Ø°Ù</button></td>
    </tr>`;
  });
  html += "</table>";
  div.innerHTML = html;
}

window.deleteHomework = async function (id) {
  await deleteDoc(doc(db, "profile", "aycha", "homework", id));
  showHomework();
}

window.saveQuran = async function () {
  const qDate = document.getElementById("qDate");
  const suraInput = document.getElementById("surah");
  const fromInput = document.getElementById("from");
  const toInput = document.getElementById("to");
  const noteInput = document.getElementById("note");
  const status = document.getElementById("qStatus");

  const date = qDate.value;
  const sura = surahInput.value.trim();
  const from = fromInput.value.trim();
  const to = toInput.value.trim();
  const note = noteInput.value.trim();

  if (!date || !sura || !from || !to) {
    status.textContent = "âŒ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.";
    status.style.color = "red"; return;
  }

  await addDoc(collection(db, "profile", "aycha", "quran"), {
    date, sura, from, to, note
  });

  status.textContent = "âœ” ØªÙ… Ø§Ù„Ø­ÙØ¸!";
  status.style.color = "green";
  qDate.value = suraInput.value = fromInput.value = toInput.value = noteInput.value = "";
  showQuran();
}


async function showQuran() {
  const div = document.getElementById("quranList");
  const q = query(collection(db, "profile", "aycha", "quran"), orderBy("date", "desc"));
  const snap = await getDocs(q);
  if (snap.empty) return div.innerHTML = "ğŸ“­ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ÙÙˆØ¸Ø§Øª.";

  let html = "<table><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ø³ÙˆØ±Ø©</th><th>Ù…Ù†</th><th>Ø¥Ù„Ù‰</th><th>Ù…Ù„Ø§Ø­Ø¸Ø©</th></tr>";
  snap.forEach(doc => {
    const d = doc.data();
    html += `<tr>
      <td>${d.date}</td><td>${d.sura}</td><td>${d.from}</td><td>${d.to}</td><td>${d.note}</td>
    </tr>`;
  });
  html += "</table>";
  div.innerHTML = html;
}

showHomework();
showQuran();
</script>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
  flatpickr("#hwDate", { dateFormat: "Y-m-d", locale: "en" });
  flatpickr("#qDate", { dateFormat: "Y-m-d", locale: "en" });
</script>

</body>
</html>
