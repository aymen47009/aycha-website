<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ“š Ø¯Ø±Ø§Ø³ØªÙŠ - Ø¹Ø§Ø¦Ø´Ø©</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #fff5fb;
      color: #4a004a;
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-size: 2.2rem;
      margin-bottom: 30px;
    }
    .section {
      background-color: #ffe6f8;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 10px;
      border: 1px solid #ddd;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      background-color: #e0a6ff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #d183ff;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #ffd9f4;
    }
  </style>
</head>
<body>

  <h1>ğŸ“š Ø¯Ø±Ø§Ø³ØªÙŠ</h1>

  <!-- ğŸ“ Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ø¨ -->
  <div class="section">
    <h2>âœï¸ Ø£ÙƒØªØ¨ÙŠ ÙˆØ§Ø¬Ø¨Ùƒ</h2>
    <label>ğŸ“˜ Ø§Ù„Ù…Ø§Ø¯Ø©:</label>
    <input id="subjectInput" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø±ÙŠØ§Ø¶ÙŠØ§Øª">

    <label>ğŸ“„ Ø§Ù„ØµÙØ­Ø©:</label>
    <input id="pageInput" type="number" placeholder="Ù…Ø«Ø§Ù„: 20">

    <label>ğŸ”¢ Ø±Ù‚Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†:</label>
    <input id="exerciseInput" type="text" placeholder="Ù…Ø«Ø§Ù„: ØªÙ…Ø±ÙŠÙ† 3">

    <label>ğŸ“† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²:</label>
    <input id="dateInput" type="date">

    <label>ğŸ“ Ù…ÙƒØ§Ù† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²:</label>
    <input id="placeInput" type="text" placeholder="Ù…Ø«Ø§Ù„: ÙÙŠ Ø§Ù„Ù…Ù†Ø²Ù„ / Ø§Ù„Ù…Ø¯Ø±Ø³Ø©">

    <button onclick="saveHomework()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙˆØ§Ø¬Ø¨</button>
    <p id="saveStatus"></p>
  </div>

  <!-- ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª -->
  <div class="section">
    <h2>ğŸ“‹ Ø¬Ø¯ÙˆÙ„ ÙˆØ§Ø¬Ø¨Ø§ØªÙŠ</h2>
    <div id="homeworkTable" style="overflow-x: auto;"></div>
  </div>

  <!-- ğŸ® Ø§Ø®ØªØ¨Ø§Ø± -->
  <div class="section">
    <h2>ğŸ® Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ!</h2>
    <p><strong>Ø³Ù¡: Ù…Ø§ Ù‡Ùˆ Ù†Ø§ØªØ¬ 7 Ã— 6ØŸ</strong></p>
    <input type="text" id="q1" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©">
    <p><strong>Ø³Ù¢: Ù…Ø§ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ØŸ</strong></p>
    <input type="text" id="q2" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©">
    <button onclick="checkQuiz()">âœ… ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
    <p id="quiz-result" style="color: green;"></p>
  </div>

  <!-- âœ… Firebase Ùˆ JavaScript -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
    import {
      getFirestore, collection, addDoc, Timestamp,
      getDocs, orderBy, query, deleteDoc, doc
    } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyDK3CqwJEB6uG8npPCG6jQqzqkUbI6vjJs",
      authDomain: "aycha-website.firebaseapp.com",
      projectId: "aycha-website",
      storageBucket: "aycha-website.appspot.com",
      messagingSenderId: "488063935676",
      appId: "1:488063935676:web:8a6450edd804d711db5cb9"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // âœ… Ø­ÙØ¸ Ø§Ù„ÙˆØ§Ø¬Ø¨
    window.saveHomework = async function () {
      const subject = document.getElementById("subjectInput").value.trim();
      const page = document.getElementById("pageInput").value.trim();
      const exercise = document.getElementById("exerciseInput").value.trim();
      const date = document.getElementById("dateInput").value;
      const place = document.getElementById("placeInput").value.trim();
      const status = document.getElementById("saveStatus");

      if (!subject || !page || !exercise || !date || !place) {
        status.textContent = "âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ ÙƒÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª.";
        status.style.color = "red";
        return;
      }

      try {
        await addDoc(collection(db, "profile", "aycha", "homework"), {
          subject, page, exercise, date, place, createdAt: Timestamp.now()
        });
        status.textContent = "âœ” ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙˆØ§Ø¬Ø¨!";
        status.style.color = "green";

        document.getElementById("subjectInput").value = "";
        document.getElementById("pageInput").value = "";
        document.getElementById("exerciseInput").value = "";
        document.getElementById("dateInput").value = "";
        document.getElementById("placeInput").value = "";

        await loadHomeworkTable();
      } catch (err) {
        console.error(err);
        status.textContent = "âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸.";
        status.style.color = "red";
      }
    };

    // âœ… Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª ÙÙŠ Ø¬Ø¯ÙˆÙ„
    window.loadHomeworkTable = async function () {
      const container = document.getElementById("homeworkTable");
      container.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";

      try {
        const q = query(collection(db, "profile", "aycha", "homework"), orderBy("createdAt", "desc"));
        const snapshot = await getDocs(q);

        if (snapshot.empty) {
          container.innerHTML = "ğŸ“­ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨Ø§Øª.";
          return;
        }

        let html = `<table><tr>
          <th>ğŸ“˜ Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>ğŸ“„ Ø§Ù„ØµÙØ­Ø©</th><th>ğŸ”¢ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</th>
          <th>ğŸ“† Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>ğŸ“ Ø§Ù„Ù…ÙƒØ§Ù†</th><th>ğŸ—‘ï¸ Ø­Ø°Ù</th>
        </tr>`;

        snapshot.forEach(docSnap => {
          const d = docSnap.data();
          const id = docSnap.id;
          html += `<tr>
            <td>${d.subject}</td>
            <td>${d.page}</td>
            <td>${d.exercise}</td>
            <td>${d.date}</td>
            <td>${d.place}</td>
            <td><button onclick="deleteHomework('${id}')">âŒ</button></td>
          </tr>`;
        });

        html += `</table>`;
        container.innerHTML = html;
      } catch (err) {
        console.error(err);
        container.innerHTML = "âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
      }
    };

    // ğŸ—‘ï¸ Ø­Ø°Ù ÙˆØ§Ø¬Ø¨
    window.deleteHomework = async function (id) {
      if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ÙŠÙ† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙˆØ§Ø¬Ø¨ØŸ")) {
        await deleteDoc(doc(db, "profile", "aycha", "homework", id));
        await loadHomeworkTable();
      }
    };

    // ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø°Ø§ØªÙŠ
    window.checkQuiz = function () {
      let score = 0;
      if (document.getElementById("q1").value.trim() === "42") score++;
      if (document.getElementById("q2").value.trim() === "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±") score++;
      document.getElementById("quiz-result").textContent = `ğŸ‰ Ù†ØªÙŠØ¬ØªÙƒ: ${score} Ù…Ù† 2`;
    };

    // âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    loadHomeworkTable();
  </script>

</body>
</html>
